@import "tailwindcss";

@theme {
    --font-sans:
        "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        sans-serif;
    --font-mono:
        "Geist Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}

@layer base {
    :root {
        color-scheme: light;

        /* Pure white - visitors.now style */
        --color-bg: #ffffff;
        --color-bg-subtle: #fafafa;
        --color-bg-muted: rgba(0, 0, 0, 0.04);
        --color-bg-muted-hover: rgba(0, 0, 0, 0.08);
        --color-bg-elevated: #ffffff;
        --color-ring-elevated: rgba(0, 0, 0, 0.05);

        --color-text: #000000;
        --color-text-secondary: #666666;
        --color-text-muted: #999999;
        --color-text-tertiary: #cccccc;

        /* Hairline borders */
        --color-border: rgba(0, 0, 0, 0.08);
        --color-border-subtle: rgba(0, 0, 0, 0.04);
        --color-border-opaque: #eee;

        /* Colors matching visitors.now */
        --color-negative: #e85d5d;
        --color-positive: #22c55e;
        --color-chart: #4a90d9;
        --color-score: #22c55e;

        /* Row hover */
        --color-row-hover: #fafafa;

        /* Dialog overlay */
        --color-overlay: rgba(255, 255, 255, 0.7);

        /* Brand */
        --color-brand: #fc532a;
    }

    .dark {
        color-scheme: dark;

        --color-bg: #0a0a0a;
        --color-bg-subtle: #111111;
        --color-bg-muted: rgba(255, 255, 255, 0.05);
        --color-bg-muted-hover: rgba(255, 255, 255, 0.1);
        --color-bg-elevated: #151515;
        --color-ring-elevated: rgba(255, 255, 255, 0.15);

        --color-text: #ffffff;
        --color-text-secondary: #999999;
        --color-text-muted: #666666;
        --color-text-tertiary: #333333;

        --color-border: rgba(255, 255, 255, 0.1);
        --color-border-subtle: rgba(255, 255, 255, 0.05);
        --color-border-opaque: #212121;

        --color-negative: #f87171;
        --color-positive: #4ade80;
        --color-chart: #fc532a;
        --color-score: #4ade80;

        --color-row-hover: #151515;

        /* Dialog overlay */
        --color-overlay: rgba(0, 0, 0, 0.6);

        /* Brand */
        --color-brand: #fc532a;
    }

    html {
        font-feature-settings: "cv03", "cv04", "cv11";
        scrollbar-width: thin;
        scrollbar-color: var(--color-text-tertiary) transparent;
    }

    /* macOS-style scrollbars */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--color-text-tertiary);
        border-radius: 4px;
        border: 2px solid transparent;
        background-clip: content-box;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--color-text-muted);
        border: 2px solid transparent;
        background-clip: content-box;
    }

    ::-webkit-scrollbar-corner {
        background: transparent;
    }

    body {
        @apply bg-[var(--color-bg)] text-[var(--color-text)] m-0 p-0 min-h-screen;
    }

    /* Text selection colors */
    ::selection {
        background-color: rgba(0, 154, 250, 0.1);
        color: #0066db;
    }

    .dark ::selection {
        background-color: rgba(240, 104, 0, 0.1);
        color: #ff6b01;
    }

    /* Table resizer */
    .resizer {
        position: absolute;
        right: 0;
        top: 0;
        height: 100%;
        width: 4px;
        cursor: col-resize;
        user-select: none;
        touch-action: none;
    }

    .resizer:hover,
    .resizer.isResizing {
        background: var(--color-border);
    }

    /* Minimal focus */
    *:focus-visible {
        outline: 1px solid var(--color-text-muted);
        outline-offset: 1px;
    }

    /* Sticky cells need a background to cover content when scrolling */
    td.sticky-cell {
        background-color: var(--color-bg);
    }

    /* Zebra striping - visible only when not hovering table */
    tbody:not(:hover):not(.no-zebra) tr:nth-child(odd):not(.no-zebra) td {
        background-color: var(--color-bg-subtle);
    }

    /* Sticky cells need explicit zebra background too (higher specificity) */
    tbody:not(:hover):not(.no-zebra)
        tr:nth-child(odd):not(.no-zebra)
        td.sticky-cell {
        background-color: var(--color-bg-subtle);
    }
}

@utility shadow-contrast {
    box-shadow:
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.04),
        inset 0 0.5px 0 0 rgba(255, 255, 255, 0.04),
        0 1px 3px 0px rgba(0, 0, 0, 0.4);
}

/* Simple fade */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.animate-fade-in {
    animation: fadeIn 0.15s ease-out;
}

/* Soft pulse for loading states */
@keyframes pulseSoft {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.animate-pulse-soft {
    animation: pulseSoft 2s ease-in-out infinite;
}

/* Dialog animations */
@keyframes dialogBackdropIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes dialogBackdropOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

@keyframes dialogPopupIn {
    from {
        opacity: 0;
        transform: scale(0.96);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes dialogPopupOut {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.96);
    }
}

.dialog-backdrop {
    animation: dialogBackdropIn 0.15s ease-out forwards;
}

.dialog-backdrop[data-ending-style] {
    animation: dialogBackdropOut 0.1s ease-in forwards;
}

.dialog-popup {
    animation: dialogPopupIn 0.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.dialog-popup[data-ending-style] {
    animation: dialogPopupOut 0.1s ease-in forwards;
}

.dialog-backdrop.no-animation,
.dialog-popup.no-animation {
    animation: none;
}

/* Menu animations */
@keyframes menuIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes menuOut {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

.menu-popup {
    transform-origin: var(--transform-origin);
    animation: menuIn 0.15s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.menu-popup[data-ending-style] {
    animation: menuOut 0.1s ease-in forwards;
}

/* Minimal chat prose */
.prose-chat p {
    margin: 0.5em 0;
}

.prose-chat p:first-child {
    margin-top: 0;
}

.prose-chat p:last-child {
    margin-bottom: 0;
}

.prose-chat ul,
.prose-chat ol {
    margin: 0.5em 0;
    padding-left: 1.25em;
}

.prose-chat li {
    margin: 0.25em 0;
}

/* Reset code styles inside pre (code blocks) */
.prose-chat pre .prose-code {
    padding: 0;
    background: transparent;
    border-radius: 0;
}

/* Get started pill */
.get-started-pill {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
    animation: pillEntrance 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes pillEntrance {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
